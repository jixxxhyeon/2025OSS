<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>상품관리</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <link rel="stylesheet" href="my.css">
</head>
<body>
  <nav class="header_nav navbar bg-white border-bottom">
    <div class="container layout_container">
      <a class="header_brand navbar-brand" href="index.html">My products</a>
    </div>
  </nav>

  <main class="main_area container layout_container py-4">
    <h2 class="main_title">Product Detail</h2>

    <div class="card detail_wrap">
      <div class="card-body">
        <dl class="row mb-0" id="detailList"></dl>
      </div>
    </div>

    <div class="detail_btnGroup mt-4 d-flex flex-wrap gap-2">
      <a class="btn btn-success" href="add.html">추가</a>
      <a class="btn btn-primary" id="btnEdit">수정</a>
      <button class="btn btn-danger" id="btnDelete">삭제</button>
      <a class="btn btn-outline-secondary" href="index.html">목록</a>
    </div>
  </main>

  <script src="data.js"></script>
  <script>
    const id = getIdFromQuery();
    const item = PRODUCT_DATA.find(x => x.id === id) || PRODUCT_DATA[0];

    function renderDetail(r){

        const rows = [
            ['품목', r['품목']],
            ['품명', r['품명']],
            ['가격', '₩ ' + fmt(r['가격'])],
            ['수량', r['수량']],
            ['구매일', r['구매일']],
            ['재고', r['재고']],
        ];
        const dl = $('#detailList').empty();
        rows.forEach(([k,v]) => dl.append(`<dt class="col-sm-3">${k}</dt><dd class="col-sm-9">${v}</dd>`));
    }

    $('#btnEdit').on('click', ()=> location.href = 'edit.html?id=' + item.id);
    $('#btnDelete').on('click', ()=> { 
        if(confirm('게시물을 삭제할까요?')) 
        alert('게시물이 삭제되었습니다. '); });

    $(function(){ renderDetail(item); });
  </script>
</body>
</html>
